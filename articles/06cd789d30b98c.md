---
title: "SWR ã¨ Suspense ã®å•é¡Œ"
emoji: "ğŸƒ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["react", "nextjs", "swr"]
published: true
---

# ã¯ã˜ã‚ã«

Suspense ã‚’ä½¿ç”¨ã—ãŸãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ³ã‚°ãŒæµè¡Œã£ã¦ã„ã‚‹ã‚ˆã†ã«æ€ã„ã¾ã™ã€‚
ç§ã¯æ„›ç”¨ã® SWR ã§ Suspense ã‚’ä½¿ãŠã†ã¨èª¿ã¹ã¦ã¿ãŸã¨ã“ã‚ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«æ¬¡ã®ã‚ˆã†ãªæ–‡ç« ã‚’ç™ºè¦‹ã—ã¾ã—ãŸã€‚

> React ã¯ã¾ã ã‚µã‚¹ãƒšãƒ³ã‚¹ã‚’ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã‚ã‚‹ SWR ãªã©ã§ä½¿ã†ã“ã¨ã‚’ æ¨å¥¨ã—ã¦ã„ã¾ã›ã‚“ã€‚ ã“ã‚Œã‚‰ã® API ã¯å°†æ¥çš„ã«ç§ãŸã¡ã®èª¿æŸ»ã«ã‚ˆã‚Šå¤‰æ›´ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

è©³ã—ãèª¿æŸ»ã—ã¦ React ã®ç¾åœ¨ã®ä»•æ§˜ã«é–¢ã‚ã‚‹é¢ç™½ã„ã“ã¨ãŒåˆ†ã‹ã£ãŸã®ã§è¨˜äº‹ã«ã—ã¦å…±æœ‰ã—ã¾ã™ã€‚

ã¡ãªã¿ã« SWR ã¨ Suspense ã®å•é¡Œã¨è¨€ã£ã¦ã„ã¾ã™ãŒã€ã“ã‚Œã¯ Suspense ã‚’ä½¿ç”¨ã™ã‚‹å…¨ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ³ã‚°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆä¾‹ï¼š`Tanstack Query`ï¼‰ã§ç”Ÿã˜ã‚‹å•é¡Œã‚‰ã—ã„ã§ã™ã€‚
ã§ã™ã®ã§ç§ãŒèª¿ã¹ãŸã“ã¨ãŒé–“é•ã£ã¦ã„ãªã‘ã‚Œã°ã€æ­£ã—ã„ã‚¿ã‚¤ãƒˆãƒ«ã¯ ã€ŒSWR ã¨ Suspense ã®å•é¡Œã€ ã§ã¯ãªã **ã€ŒSuspense ã®å•é¡Œã€** ã§ã™ã€‚
ã§ã™ãŒSWR ä»¥å¤–ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§æ¤œè¨¼ã™ã‚‹ä½“åŠ›ãŒãªã‹ã£ãŸãŸã‚ã€ã“ã®è¨˜äº‹ã§ã¯ç„¦ç‚¹ã‚’ SWR ã«çµã‚Šã¾ã™ã€‚


åŸºæœ¬çš„ã«ä»¥ä¸‹ã®æŠ€è¡“æ§‹æˆã§è©±ã‚’é€²ã‚ã¾ã™ã€‚

- Next.js v14.1.4
  - Pages Router(App Router ã§ã‚‚ç™ºç”Ÿ)
- SWR v2.2.5
- React v18

# ãªãœ React ã¯ SWR ã®ã‚ˆã†ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ Suspence ã‚’ä½¿ã†ã®ã‚’ãŠã™ã™ã‚ã—ã¦ã„ãªã„ã®ã‹

å‚è€ƒã«ãªã‚‹ã‚½ãƒ¼ã‚¹ã¯ä»¥ä¸‹ã® 2 ã¤ã§ã™ã€‚
- React ãƒãƒ¼ãƒ ã® Suspense ã«å¯¾ã™ã‚‹æ„è¦‹
- SWR ã®ãƒ¡ãƒ³ãƒ†ãƒŠã®æ„è¦‹

## React ãƒãƒ¼ãƒ ã® Suspense ã«å¯¾ã™ã‚‹è¨€åŠ

React ãƒãƒ¼ãƒ ã® [v18 ã® Suspense](https://react.dev/blog/2022/03/29/react-v18#suspense-in-data-frameworks) ã«ã¤ã„ã¦ã®è¨˜äº‹ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚

> Ad hoc data fetching with Suspense is technically possible, but still not recommended as a general strategy. 
Suspense ã§ãã®å ´ã—ã®ããªãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ³ã‚°ã¯æŠ€è¡“çš„ã«å¯èƒ½ã ãŒã€ä¸€èˆ¬çš„ãªæˆ¦ç•¥ã¨ã—ã¦ã¯ã¾ã ãŠã™ã™ã‚ã•ã‚Œãªã„ã€‚

> Suspense-enabled data fetching without the use of an opinionated framework is not yet supported. The requirements for implementing a Suspense-enabled data source are unstable and undocumented. An official API for integrating data sources with Suspense will be released in a future version of React.
ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ä½¿ç”¨ã—ãªã„ Suspense ãƒ™ãƒ¼ã‚¹ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ³ã‚°ã¯ã¾ã ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã‚µã‚¹ãƒšãƒ³ã‚¹å¯¾å¿œã®ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚’å®Ÿè£…ã™ã‚‹ãŸã‚ã®è¦ä»¶ã¯ä¸å®‰å®šã§ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚’ã‚µã‚¹ãƒšãƒ³ã‚¹ã¨çµ±åˆã™ã‚‹ãŸã‚ã®å…¬å¼APIã¯ã€å°†æ¥ã®Reactã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã‚‹äºˆå®šã§ã™ã€‚
https://react.dev/reference/react-dom/server/renderToPipeableStream#usage

ã“ã®ã“ã¨ã‹ã‚‰ Suspense ã‚’ä½¿ç”¨ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ³ã‚°ã¯**ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¬ãƒ™ãƒ«ã§ã¯**ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ãªã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚

## SWR ã®ãƒ¡ãƒ³ãƒ†ãƒŠã®æ„è¦‹

SWR (Next.js)ã®ãƒ¡ãƒ³ãƒ†ãƒŠã® shuding ã•ã‚“ã¯[SWR ã‚’ React v18 å¯¾å¿œã—ã¦ Suspense ã‚’å°å…¥ã—ã‚ˆã†ã¨ã„ã† Issue](https://github.com/vercel/swr/issues/1898#issuecomment-1086879485) ã«ãŠã„ã¦æ¬¡ã® 2 ã¤ã®ç™ºè¨€ã—ã¦ã„ã¾ã™ã€‚

> I personally still don't recommend using it in production:
å€‹äººçš„ã«ã¯ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã§ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯ã¾ã ãŠã™ã™ã‚ã—ã¾ã›ã‚“ã€‚

> I didn't mean that data fetching libraries should not use Suspense. What I'm thinking is Suspense based data fetching is almost impossible to implement correctly in the library level as of today, it should be done to the framework level.
ç§ã¯ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ³ã‚°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ Suspense ã‚’ä½¿ã†ã¹ãã§ã¯ãªã„ã¨è¨€ã†ã¤ã‚‚ã‚Šã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ç§ãŒæ€ã†ã«ã€Suspense ãƒ™ãƒ¼ã‚¹ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ³ã‚°ã‚’ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¬ãƒ™ãƒ«ã§æ­£ã—ãå®Ÿè£…ã™ã‚‹ã“ã¨ã¯ç¾çŠ¶ã¯ã»ã¨ã‚“ã©ä¸å¯èƒ½ã§ã€ãã‚Œã¯ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãƒ¬ãƒ™ãƒ«ã§è¡Œã‚ã‚Œã‚‹ã¹ãã§ã™ã€‚

ã“ã†æ›¸ã„ã¦ã‚ã‚‹ã“ã¨ã‹ã‚‰ã€Suspense ã‚’ä½¿ç”¨ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ³ã‚°ã‚’ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¬ãƒ™ãƒ«ã§å®Ÿè£…ã™ã‚‹ã“ã¨ã¯ã»ã¨ã‚“ã©ä¸å¯èƒ½ã§ã€å•é¡ŒãŒã‚ã‚‹ãŸã‚ãŠã™ã™ã‚ã§ããªã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚

ã¡ãªã¿ã« [shuding ã•ã‚“ã®ã“ã®ã‚³ãƒ¡ãƒ³ãƒˆ](https://github.com/vercel/swr/issues/1898#issuecomment-1094426113)æ›°ãã€ã“ã®å•é¡Œã¯ SWR ã ã‘ã®å•é¡Œã§ã¯ãªãã€ã™ã¹ã¦ã® Suspense ãƒ™ãƒ¼ã‚¹ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ³ã‚°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ç”Ÿã˜ã‚‹å•é¡Œã ãã†ã§ã™ã€‚

ä»¥ä¸Š 2 ã¤ã‹ã‚‰ã€React ã¨ SWR ã®ãã‚Œãã‚Œã®é–‹ç™ºè€…ã¯ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ³ã‚°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒ Suspense ã‚’ä½¿ã†ã“ã¨ã‚’æ¨å¥¨ã—ã¦ã„ãªã„ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚


## SWR ã¨ Suspense ã®å•é¡Œ

Suspense ã®ä½¿ç”¨ãŒé–‹ç™ºè€…ã«ã‚ˆã£ã¦æ¨å¥¨ã•ã‚Œã¦ã„ãªã„ã“ã¨ã¯åˆ†ã‹ã‚Šã¾ã—ãŸã€‚
ã§ã¯ãªãœæ¨å¥¨ã•ã‚Œã¦ã„ãªã„ã®ã§ã—ã‚‡ã†ã‹ã€‚
SWR ã¨ Suspense ã®å•é¡Œç‚¹ã«ã¤ã„ã¦å…·ä½“çš„ã«è¦‹ã¦ã„ãã¾ã™ã€‚

åŒã˜ã shuding ã•ã‚“ã«ã‚ˆã£ã¦ SWR ã¨ Suspense ã®å•é¡ŒãŒèªã‚‰ã‚Œã¦ã„ã¾ã™ã€‚
ãã®å•é¡Œç‚¹ã¨ã„ã†ã®ãŒä»¥ä¸‹ã® 2 ã¤ã§ã™ã€‚
- [SWR ã‚’ SSR ã§ Suspense ã¨ã¨ã‚‚ã«ä½¿ç”¨ã™ã‚‹å ´åˆã€ãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒŸã‚¹ãƒãƒƒãƒãŒç™ºç”Ÿ](https://github.com/vercel/swr/issues/1832)
- [SWR ã® Suspense ã®ã‚¦ã‚©ãƒ¼ã‚¿ãƒ¼ãƒ•ã‚©ãƒ¼ãƒ«ã¨æ¡ä»¶ä»˜ããƒªã‚¯ã‚¨ã‚¹ãƒˆå•é¡ŒãŒæœªè§£æ±º](https://github.com/vercel/swr/pull/168)

é †ã«èª¬æ˜ã—ã¾ã™ã€‚

### SSR æ™‚ã«ãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒŸã‚¹ãƒãƒƒãƒã®ç™ºç”Ÿã«ã¤ã„ã¦

ãªãœ SSR ã§ SWR ã¨ Suspense ã‚’ä½¿ã†ã¨ãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒŸã‚¹ãƒãƒƒãƒãŒèµ·ã“ã‚‹ã®ã‹ã¨ã„ã†ã¨ã€Suspense å†…éƒ¨ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯**ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ã‚‚è¡Œã‚ã‚Œã‚‹ã‹ã‚‰**ã§ã™ã€‚

ãã†ãªã‚‹ã¨
1. ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰
2. ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰

ã®ä¸¡æ–¹ã§ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãŒè¡Œã‚ã‚Œã‚‹ã®ã§ãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒŸã‚¹ãƒãƒƒãƒãŒèµ·ã“ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

ã©ã†ã„ã†ã“ã¨ã‹èª¬æ˜ã—ã¾ã™ã€‚
ä¾‹ãˆã°ãƒŸãƒªç§’å˜ä½ã®æ™‚åˆ»æƒ…å ±ã‚’ãƒ•ã‚§ãƒƒãƒã™ã‚‹ API ãŒã‚ã‚‹ã¨ã—ã¦ã€ã“ã‚Œã‚’ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã®ä¸¡æ–¹ã§å©ãã¨ã—ã¾ã™ã€‚
ãã†ãªã‚‹ã¨æ™‚åˆ»ã®ã‚ºãƒ¬ã®å½±éŸ¿ã§ä¸¡ã‚µã‚¤ãƒ‰ã®çµæœãŒåŒã˜ã«ãªã‚‹ã¨ã¯é™ã‚Šã¾ã›ã‚“ã€‚
ãã®çµæœä¸¡ã‚µã‚¤ãƒ‰ãŒãƒŸã‚¹ãƒãƒƒãƒã™ã‚‹ãŸã‚ãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ã§ç”Ÿã˜ã‚‹ã€ã¨ã„ã†ã“ã¨ã§ã™ã€‚

å¯Ÿã—ã®ã‚ˆã„æ–¹ãªã‚‰ãŠåˆ†ã‹ã‚Šã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ã“ã®å•é¡Œã¯ `create-react-app` ã®ã‚ˆã†ãª SSR ã‚’ã—ãªã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã ã£ãŸã‚Šã€API ã§å–å¾—ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãŒã»ã¼é™çš„ãªã‚‰èµ·ã“ã‚Šå¾—ã¾ã›ã‚“ã€‚

:::message
ã€Œã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã ã‘ or ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã ã‘ã§ãƒ•ã‚§ãƒƒãƒã™ã‚Œã°ã„ã„ã˜ã‚ƒã‚“ã€ã¨æ€ã‚ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

ã¨ã“ã‚ãŒã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã ã‘ã§ãƒ•ã‚§ãƒƒãƒã¨ã„ã†ã®ãŒ Suspense ã¨ Streaming ã‚’ä½¿ç”¨ã™ã‚‹ã‚‚ã®ã§ã‚ã‚Šã€ä¸Šè¿°ã—ãŸã€Œãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¬ãƒ™ãƒ«ã§ã¯ Suspense ã‚’ä½¿ç”¨ã—ãŸãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãŒè¡Œãˆãªã„ã€ã¨ã„ã†å•é¡ŒãŒå­˜åœ¨ã—ã¾ã™ã€‚

ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã ã‘ã®ãƒ•ã‚§ãƒƒãƒã¨ã„ã†ã®ã¯å•é¡Œãªã„å‹•ä½œã§ã™ã€‚
ã§ã™ã®ã§åŸºæœ¬çš„ã« SWR ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã ã‘ã§ãƒ•ã‚§ãƒƒãƒã‚’ã™ã‚‹æ–¹é‡ã‚’å–ã‚Šã¾ã™ã€‚
:::

ã¡ãªã¿ã«ã€Œãªãœ Suspense å†…éƒ¨ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§å®Ÿè¡Œã•ã‚Œã‚‹ã‹ã€ã‚’èª¿ã¹ã‚‹ãŸã‚ã« SWR ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¾ã—ãŸãŒåˆ†ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚
ç­†è€…ã« Streaming with Suspence ã®çŸ¥è­˜ã¨ã‚µãƒ¼ãƒãƒ¼ç’°å¢ƒã§ã® React hooks ã®çŸ¥è­˜ãŒã‚ã‚Œã°åˆ†ã‹ã£ãŸã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

ã“ã®å•é¡Œã¯ç¾åœ¨ã¨ã‚ã‚‹æ–¹æ³•ã§è§£æ¶ˆã•ã‚Œã¦ã„ã¾ã™ã€‚
å¾Œè¿°ã™ã‚‹è§£æ±ºç­–ã§å–ã‚Šä¸Šã’ã¾ã™ã€‚

### SWR ã® Suspense ã®ã‚¦ã‚©ãƒ¼ã‚¿ãƒ¼ãƒ•ã‚©ãƒ¼ãƒ«ã¨æ¡ä»¶ä»˜ããƒªã‚¯ã‚¨ã‚¹ãƒˆå•é¡ŒãŒæœªè§£æ±ºã«ã¤ã„ã¦

ç­†è€…ã®ç’°å¢ƒã§ã¯å†ç¾ã§ããªã‹ã£ãŸãŸã‚ã€ãŸã ã®ç´¹ä»‹ã«ãªã‚Šã¾ã™ã€‚
ï¼ˆãã‚‚ãã‚‚ã“ã®å•é¡Œã®è§£æ±ºç­–ãŒèªã‚‰ã‚Œã¦ã„ã‚‹ã ã‘ã§ã€ãã®å•é¡ŒãŒä½•ãªã®ã‹ã€ã¾ãŸãã®å•é¡ŒãŒã©ã†ã™ã‚Œã°ç™ºç”Ÿã™ã‚‹ã‹ãªã©ã¯æ›¸ã„ã¦ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸï¼‰

ã‚¦ã‚©ãƒ¼ã‚¿ãƒ¼ãƒ•ã‚©ãƒ¼ãƒ«ã®å•é¡Œã¨ã¯ä¾å­˜é–¢ä¿‚ã«ãªã„ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒä¸¦åˆ—ã§ã¯ãªãç›´åˆ—ã«å‡¦ç†ã•ã‚Œã‚‹ã“ã¨ãªã¯ãšã§ã™ã€‚ï¼ˆæ˜ç¢ºãªè¨€åŠè¦‹ã¤ã‹ã‚‰ãšï¼‰
æ¡ä»¶ä»˜ããƒªã‚¯ã‚¨ã‚¹ãƒˆã¨ã¯ä¸‹ã®ã‚ˆã†ã«ç‰¹å®šã®æ¡ä»¶ãŒæº€ãŸã•ã‚ŒãŸã¨ãã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã™ã‚‹ã“ã¨ã§ã™ã€‚

```jsx
// æ¡ä»¶ä»˜ããƒªã‚¯ã‚¨ã‚¹ãƒˆ
const { data } = useSWR(shouldFetch ? '/api/data' : null, fetcher)
```

SWR ã¯ä¾å­˜çš„ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å¯èƒ½ãªé™ã‚Šä¸¦åˆ—ã«ã€ã‹ã¤è³¢ãè¡Œã„ã¾ã™ã€‚
ã‚‚ã—æ¬¡ã®ã‚ˆã†ãª 3 ã¤ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒã‚ã£ãŸã¨ã—ã¦ã‚‚ã€SWR ã¯è³¢ã„ã®ã§ A ã¨ B ã‚’ä¸¦åˆ—ã«å‡¦ç†ã—ã€A ã¨ B ã®ä¸¡æ–¹ãŒå®Œäº†æ¬¡ç¬¬ C ã‚’å‡¦ç†ã—ã¾ã™ã€‚

- ãƒªã‚¯ã‚¨ã‚¹ãƒˆ A
- ãƒªã‚¯ã‚¨ã‚¹ãƒˆ B
- A, B ä¸¡æ–¹ã®çµæœã«ä¾å­˜ã™ã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆ C

ã§ã™ãŒã©ã†ã‚„ã‚‰ Suspense ã¨ã¨ã‚‚ã«ä½¿ç”¨ã™ã‚‹ã¨ä¸å…·åˆãŒã‚ã‚‹ã‚‰ã—ã„ã§ã™ã€‚
ã€Œã‚‰ã—ã„ã€ã¨è¨€ã£ã¦ã„ã‚‹ã®ã¯ã€ç­†è€…ã®ç’°å¢ƒã§ã¯å†ç¾ã§ããªã‹ã£ãŸã‹ã‚‰ã§ã™ã€‚

å†ç¾ç’°å¢ƒã‚’ [code sandbox](https://codesandbox.io/p/github/Key5n/swr-with-suspense/draft/loving-violet?file=%2Fsrc%2Fpages%2Findex.tsx) ã«ç½®ã„ã¦ãŠãã¾ã™ã€‚

:::details code sandbox ã®å†…å®¹

ä»¥ä¸‹ã®ã‚ˆã†ãªéä¾å­˜çš„ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ 2 ã¤ã€ãã—ã¦ã©ã¡ã‚‰ã‹ã«ä¾å­˜çš„ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆ 2 ã¤ã®è¨ˆ 4 ã¤ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ç”¨æ„ã—ã¾ã—ãŸã€‚
- ãƒªã‚¯ã‚¨ã‚¹ãƒˆ A
- ãƒªã‚¯ã‚¨ã‚¹ãƒˆ B
- A ã«ä¾å­˜çš„ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆ C
- B ã«ä¾å­˜çš„ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆ D 

ã“ã‚Œã‚‰ 4 ã¤ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ç”¨æ„ã— fetch ãŒèµ°ã£ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ console ã«è¨˜éŒ²ã™ã‚‹ã‚ˆã†ã«ã—ãŸã¨ã“ã‚ã€ suspense ãŒã‚ã‚‹å ´åˆã¨ãªã„å ´åˆã®ä¸¡æ–¹ã§åŒã˜è³¢ã„æŒ¯ã‚‹èˆã„ã—ã¾ã—ãŸã€‚


ã“ã‚Œä»¥ä¸Šç­†è€…ã«ã¯åˆ†ã‹ã‚‰ãªã‹ã£ãŸãŸã‚æœ‰è­˜è€…ã®æ–¹ãŒã„ã‚‰ã£ã—ã‚ƒã£ãŸã‚‰æ•™ãˆã¦ã„ãŸã ã‘ã‚‹ã¨å¹¸ã„ã§ã™ã€‚
:::

ä¸€å¿œã“ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã«æ§˜ã€…ãªè©¦ã¿ãŒç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã™ã€‚

:::details ã“ã®å•é¡Œã®è§£æ±ºã®ãŸã‚ã®è©¦ã¿

é¢ç™½ã„ã®ã‚’æŠœç²‹ã—ã¾ã™ã€‚

https://github.com/vercel/swr/pull/168
https://gist.github.com/shuding/6ef6a85c4c8ee57d9926e705adef88e3

```tsx
// 1å€‹ç›®
// é–¢æ•°ã®ä¸­ã« hook ãŒã‚ã‚‹ã®ã¯å¥‡å¦™ã ã‹ã‚‰å´ä¸‹ã‚‰ã—ã„
function App () {
  const [user, movies] = suspenseGuard(()=> {
    const { data: user } = useSWR('/api/user')      // not Suspense-based
    const { data: movies } = useSWR('/api/movies')  // not Suspense-based
    return [user, movies]
  })

  return (
    <div>
      Hi {user.name}, we have {movies.length} movies on the list.
    </div>
  )
}

// 2å€‹ç›®
// React ã§ã“ã‚“ãªæ›¸ãæ–¹ã§ãã‚‹ã‚“ã 
// ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŒè‰¯ããªã„ã‹ã‚‰å¾®å¦™ã‚‰ã—ã„
function App () {
  useSWRSuspenseStart()
  const { data: user } = useSWR('/api/user')
  const { data: movies } = useSWR('/api/movies')
  useSWRSuspenseEnd()

  return (
    <div>
      Hi {user.name}, we have {movies.length} movies on the list.
    </div>
  )
}
```


:::

# è§£æ±ºç­–

ã‚¦ã‚©ãƒ¼ã‚¿ãƒ¼ãƒ•ã‚©ãƒ¼ãƒ«ã®å•é¡Œã¯ç¢ºèªã§ããªã‹ã£ãŸãŸã‚ã€ç¾çŠ¶ã®å•é¡Œã¯ãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒŸã‚¹ãƒãƒƒãƒã§ã™ã€‚

ã¤ã„ã«è§£æ±ºç­–ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚
è§£æ±ºç­–ã¯å…¬å¼ãŒ 1 ã¤ã€ç­†è€…ãŒè€ƒãˆãŸã‚‚ã®ãŒ 2 ã¤ã§åˆè¨ˆ 3 ã¤ã‚ã‚Šã¾ã™ã€‚

## å…¬å¼ã«ã‚ˆã‚‹è§£æ±ºç­–

ã¾ãšãã‚‚ãã‚‚ Suspense ãŒ SSR ã§å®Ÿè¡Œã•ã‚Œã‚‹ã“ã¨ã¯é¿ã‘ã‚‰ã‚Œã¾ã›ã‚“ã€‚
ãã®ãŸã‚å…¬å¼ãŒæ‰“ã¡å‡ºã—ãŸãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·ã“ã•ãªã„ãŸã‚ã®ã®è§£æ±ºç­–ã¯ ã€Œã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã¨ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã®åˆæœŸãƒ‡ãƒ¼ã‚¿ã‚’çµ±ä¸€ã—ã¦ã€åˆæœŸè¡¨ç¤ºã‚’ç„¡ç†ã‚„ã‚ŠåŒã˜ã«ã—ã¦ã‚„ã‚Œã°ã„ã„ã€ã¨ã„ã†ã‚‚ã®ã§ã™ã€‚

ãã‚Œã¯`useSWR` ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã‚ã‚‹ `fallbackData` ã‚’æŒ‡å®šã™ã‚Œã°å¯èƒ½ã§ã™ã€‚
`fallbackData` ã¯ åˆæœŸãƒ‡ãƒ¼ã‚¿ã¨è€ƒãˆã‚‹ã¨ã‚ˆã„ã¨æ€ã„ã¾ã™ã€‚

```tsx
const dummy = [{ id: 1, title: "ãƒ€ãƒŸãƒ¼" }];

const { data } = useSWR(
  "https://api.github.com/repos/vercel/swr/issues",
  fetcher,
  { suspense: true, fallbackData: dummy }
);
```

[code sandbox](https://codesandbox.io/p/github/Key5n/swr-with-suspense/main?import=true) ç½®ã„ã¦ãŠãã®ã§è©¦ã—ã¦ã¿ã¦ãã ã•ã„ã€‚

### ã“ã®ç­–ã®æ‡¸å¿µç‚¹

æ­£ç›´ç§ã¯ã“ã®æ–¹æ³•ãŒã¨ã¦ã‚‚æ°—ã«å…¥ã‚Šã¾ã›ã‚“ã€‚
ãªãœãªã‚‰ **Suspense ã® `fallback` ãŒä½¿ç”¨ã•ã‚Œãªã„ã‹ã‚‰**ã§ã™ã€‚

:::message
SWR ã® `fallbackData` ã¨ Suspense ã® `fallback` ã¯åå‰ã¯ä¼¼ã¦ã„ã¾ã™ãŒç•°ãªã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„
:::

[code sandbox](https://codesandbox.io/p/github/Key5n/swr-with-suspense/main?import=true) ã‚’è¦‹ã‚‹ã¨ã€ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ™‚ã«`<Suspense fallback={"loading..."}>`ã®ã€Œloading...ã€ãŒè¡¨ç¤ºã•ã‚Œãšã€ãã®ä»£ã‚ã‚Šã« `fallbackData` ã«æŒ‡å®šã—ãŸã€Œãƒ€ãƒŸãƒ¼ã€ã¨ã„ã†æ–‡å­—åˆ—ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

æ­£ç›´ Suspense ã‚’ä½¿ç”¨ã—ãŸã„ç†ç”±ã®ã»ã¨ã‚“ã©ãŒ `fallback` ã ã¨æ€ã†ã®ã§ã€ã“ã‚ŒãŒä½¿ãˆãªã„ã®ã¯éå¸¸ã«ç—›ã„ã§ã™ã€‚
ãã®ãŸã‚ç­†è€…ã¯ã“ã®æ–¹æ³•ãŒæ°—ã«å…¥ã‚Šã¾ã›ã‚“ã€‚

ã¡ãªã¿ã«ã“ã‚Œã¯ [Dan å…ˆç”ŸãŒæç¤º](https://github.com/vercel/swr/issues/1906#issuecomment-1095725202)ã—ãŸç­–ã§ã™ã€‚

`fallback` ãŒä½¿ç”¨ã§ããªã„ã®ã¯è‡´å‘½çš„ã ã¨æ€ã†ã®ã§ä»–ã®è§£æ±ºç­–ã‚’æ¢ã—ã¾ã™ã€‚

## ä»–ã®è§£æ±ºç­–

Suspense ã‚’ä½¿ç”¨ã—ãŸã¨ãã«ç”Ÿã˜ã‚‹å•é¡Œç‚¹ã¯ã™ã¹ã¦ SSR ã«ã‚ˆã£ã¦ç”Ÿã˜ã‚‹ã‚‚ã®ã§ã—ãŸã€‚
ãªã®ã§åŸºæœ¬æ–¹é‡ã¯ **Suspense ã‚’å«ã‚€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ SSR ã•ã›ãªã„**ã§ã™ã€‚
Next.js ã® pre-rendering ã‚‚ SSR ã«å«ã¾ã‚Œã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

å…·ä½“çš„ã«ã¯ä»¥ä¸‹ã® 2 ã¤ã®æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚
- pre-rendering ã™ã‚‹ HTML ã®ä¸­èº«ã‚’ç©ºã«ã™ã‚‹
- `lazy`, `next/dynamic` ã‚’ä½¿ç”¨

## pre-rendering ã™ã‚‹ HTML ã®ä¸­èº«ã‚’ç©ºã«ã™ã‚‹

ã‚ˆãã‚ã‚‹å®Œå…¨ã« SSR ã‚’é¿ã‘ã‚‹ãŸã‚ã®ã‚„ã‚Šæ–¹ã§ã™ã€‚

```tsx
export default function Example() {
  const [isClient, setIsClient] = useState(false);
  useEffect(() => {
    setIsClient(true);
  }, []);
  return (
    isClient && (
      <Suspense fallback={<Loading />}>
        <Component />
      </Suspense>
    )
  );
}
```

ã“ã†ã™ã‚Œã° Suspense ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒ SSR ã•ã‚Œã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
ã“ã‚Œã®å•é¡Œç‚¹ã¯ pre-rendering ã§ç”Ÿæˆã•ã‚Œã‚‹ HTML ã«`fallback` ã® `<Loading />` ãŒå«ã¾ã‚Œãªã„ã¨ã„ã†ã“ã¨ã§ã™ã€‚
å°‘ã—å·¥å¤«ã™ã‚Œã°å«ã‚ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ãŒã€ãã“ã¾ã§ã—ã¦ Suspense ã‚’ä½¿ç”¨ã—ãŸã„ç†ç”±ã¯æ€ã„ã¤ãã¾ã›ã‚“ã€‚
Suspense ã‚’ä½¿ç”¨ã—ãªã„ã»ã†ãŒã‚ˆã‚Šç°¡æ½”ã«æ›¸ã‘ã‚‹ã¨æ€ã„ã¾ã™ã€‚

### `lazy`, `next/dynamic` ã‚’ä½¿ç”¨
React ã«ã¯ `lazy` ã¨ã„ã†é…å»¶ãƒ­ãƒ¼ãƒ‰ã®ãŸã‚ã® API ãŒã‚ã‚Šã¾ã™ã€‚ï¼ˆNext.js ã«ã¯ã“ã® `lazy` ã‚’åˆ©ç”¨ã—ãŸ `next/dynamic` ã¨ã„ã†ã‚‚ã®ãŒã‚ã‚Šã¾ã™ï¼‰
æ˜”ã¯ã‚³ãƒ¼ãƒ‰åˆ†å‰²ã®ãŸã‚ã«ä½¿ã‚ã‚Œã¦ã„ã¾ã—ãŸãŒã€æœ€è¿‘ã§ã¯è¦‹ãªã„ã‚ˆã†ãªæ°—ãŒã—ã¾ã™ã€‚

`next/dynamic` ã¯æ¬¡ã®ã‚ˆã†ã«ä½¿ç”¨ã—ã¾ã™ã€‚
`{ssr: false}` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã¤ã‘ã‚‹ã“ã¨ã§ SSR ã•ã‚Œãªããªã‚‹ãŸã‚ã€ `Component.jsx` ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒ Suspense ã¨ã¨ã‚‚ã« SWR ã‚’ä½¿ç”¨ã—ã¦ã„ã¦ã‚‚ã€å•é¡Œãªãä½¿ç”¨ã§ãã¾ã™ã€‚

å€‹äººã®æ„Ÿæƒ³ã§ã™ãŒã€ç­†è€…çš„ã«ã¯ã“ã¡ã‚‰ã®ã»ã†ãŒ semantic ã ã¨æ€ã†ã®ã§ãŠã™ã™ã‚ã§ã™ã€‚

```tsx
import dynamic from "next/dynamic"

const AvoidSSRComponent = dynamic(
  () => import('./Component'), 
  {ssr: false}
)

export default function Example() {
  return (
    <AvoidSSRComponent/>
  )
}
```

# ã¾ã¨ã‚

- SWR ã® Suspense ã¯ experimental
- React, SWR ã®é–‹ç™ºè€…ã¯ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ³ã‚°ã« Suspense ã‚’éæ¨å¥¨
- ç¾åœ¨ã® React ã® API çš„ã«ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ³ã‚°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ Suspense ã‚’å–ã‚Šæ‰±ã†ã®ã¯ã»ã¼ä¸å¯èƒ½
- SWR ã¨ Suspense ã‚’ä½¿ç”¨ã™ã‚‹ã¨ãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒŸã‚¹ãƒãƒƒãƒãŒç™ºç”Ÿ
- Suspense ã‚’ SSR ã•ã›ãªã‘ã‚Œã°ä¸‡äº‹è§£æ±º

ç­†è€…çš„ã«ã¯ Suspense ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ä½¿ã‚ãªã„ã»ã†ãŒç„¡é›£ã ã¨æ€ã„ã¾ã™ã€‚

# ã‚ã¨ãŒã

Suspense ã‚’ä½¿ç”¨ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ³ã‚°ã‚’ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¬ãƒ™ãƒ«ã§å®Ÿè£…ã™ã‚‹ã®ã¯ã»ã¼ä¸å¯èƒ½ã ã¨ã„ã†æ–‡ç« ã‚’å¼•ç”¨ã—ã¾ã—ãŸã€‚
å¼•ç”¨ã™ã‚‹ã ã‘ã§ãªãœä¸å¯èƒ½ãªã®ã‹èªã£ã¦ã„ãªã‹ã£ãŸãŸã‚ã€ãã‚Œã‚’ç°¡å˜ã«è§£èª¬ã—ã¾ã™ã€‚

https://github.com/brillout/rfcs/blob/main/text/0000-inject-to-stream.md

ã“ã® RFC ã¯ã€**ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¬ãƒ™ãƒ«ã§ SSR stream ã‚’ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ React API ã®ææ¡ˆ** ã§ã™ã€‚
SSR stream ã¨ã„ã†ã®ã¯ç«¯çš„ã«è¨€ãˆã°ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ãƒ‡ãƒ¼ã‚¿ã‚’éåŒæœŸçš„ã€ã‹ã¤é€£ç¶šçš„ã«é€ã‚‹ä»•çµ„ã¿ã§ã™ã€‚

ã‚‚ã¨ã‚‚ã¨ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ã® Suspense ã¯ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚§ãƒƒãƒã™ã‚‹ã¨ `<script>` ã‚¿ã‚°ã«ãã®ãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚ã€ãã®`<script>` ã‚¿ã‚°ã‚’ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«é€ä¿¡ã—ã¾ã™ã€‚
ãŸã ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ãƒ‡ãƒ¼ã‚¿ã‚’é€ã‚‹ãŸã‚ã®æ–¹æ³•ã§ã‚ã‚‹ `renderToPipeableStream` API ãŒãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¬ãƒ™ãƒ«ã§ã¯ä½¿ç”¨ã§ãã¾ã›ã‚“ã€‚
ãã®ãŸã‚ã‚µãƒ¼ãƒãƒ¼ã§ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ³ã‚°ã‚’ã—ã¦ã‚‚ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«é€ã‚‹æ‰‹ç«‹ã¦ãŒãªã„ã®ã§ã™ã‹ã‚‰ã€SSR ã§ Suspense ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯ä¸å¯èƒ½ã§ã—ãŸã€‚

ãã—ã¦ã“ã®ç¾çŠ¶ã‚’æ‰“ç ´ã™ã¹ãã€`injectToStream` ã¨ã„ã† API ã¨ã€ `useStream`ã¨ã„ã†æ–°ã—ã„ãƒ•ãƒƒã‚¯ãŒææ¡ˆã•ã‚Œã¾ã—ãŸã€‚

ã“ã‚Œã‚‰ã‚’ä½¿ç”¨ã™ã‚‹ã¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã‚‚ SSR stream (`<script>`ã‚’é€£ç¶šçš„ã«ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«é€ä¿¡ã™ã‚‹ Flow) ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ã§ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã‚µãƒ¼ãƒãƒ¼ã§å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«é€ä¿¡ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```js
// New `useStream()` hook
import { useStream } from 'react'

function SomeComponent() {
  const stream = useStream()
  if (stream === null) {
    // No stream available. (Client-side, or when there isn't any SSR stream at all.)
    // ...
  }
  const { injectToStream } = stream
  injectToStream('<script type="application/json">[{"some":"data"}]</script>')
  // ...
}
```
ã“ã® API ãŒå®Ÿè£…ã•ã‚ŒãŸã‚‰ä¸Šã§ã‚ã’ãŸ SWR ã®å•é¡Œã‚‚ãªããªã‚‹ã¨æ€ã‚ã‚Œã¾ã™ã€‚
ï¼ˆã¾ããã®ã“ã‚ã« SWR ãŒã‚ã‚‹ã‹ã©ã†ã‹ã¯æ€ªã—ã„ã®ã§ã™ãŒï¼‰

React ã®é€²åŒ–ã‚‚ç›®ã¾ãã‚‹ã—ã„ã§ã™ã­ã€‚

Suspense ã‚‚æ˜”ã¯ã‚³ãƒ¼ãƒ‰åˆ†å‰²ã®ãŸã‚ã ã‘ã®ã‚‚ã®ã ã£ãŸã®ãŒã€ä»Šã‚„ã™ã¹ã¦ã®éåŒæœŸå‡¦ç†ï¼ˆã‚³ãƒ¼ãƒ‰ã®å–å¾—ã€ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ³ã‚°ã€ç”»åƒã®å–å¾—ï¼‰ã‚’æ‰±ã†ã“ã¨ã«ã¾ã§åŠã‚“ã§ã„ã‚‹ã®ã§ã™ã‹ã‚‰ã€ä»Šå¾Œã¨ã‚‚é€²åŒ–ã™ã‚‹ã‚‚ã®ã¨æ€ã‚ã‚Œã¾ã™ã€‚

ã‚‚ã—é–“é•ã„ãŒã‚ã‚Œã°ã‚³ãƒ¡ãƒ³ãƒˆã§ã”æŒ‡æ‘˜ãã ã•ã„ã€‚
å¯èƒ½ãªé™ã‚Šè¿…é€Ÿã«åæ˜ ã—ã¾ã™ã€‚

# å‚è€ƒ
https://github.com/vercel/swr/issues/5
https://github.com/vercel/swr/issues/1832
https://github.com/vercel/swr/issues/1898
https://github.com/vercel/swr/issues/1906
https://github.com/vercel/swr/pull/1931
https://github.com/reactjs/rfcs/pull/219
https://gist.github.com/shuding/6ef6a85c4c8ee57d9926e705adef88e3
https://swr.vercel.app/docs/with-nextjs
https://react.dev/blog/2022/03/29/react-v18#suspense-in-data-frameworks
https://17.reactjs.org/blog/2019/11/06/building-great-user-experiences-with-concurrent-mode-and-suspense.html
https://zenn.dev/luvmini511/articles/71f65df05716ca



